{% extends "backend/layout.html.twig" %}

{% block main -%}
<div class="row">
  <div class="large-6 columns">
    {% for file in files %}
    <div class="file panel">
        <h5>{{ file.title }} <small>{{ file.name }}</small></h5>
        <ul class="no-bullet">
          {% for recipient in file.recipients %}
            <li>
              {{ recipient.name }}
              <small>{{ recipient.downloadCounter }}</small>
              {{ widgets.clipboard_text(url('file_share', {'token': recipient.token, 'slug': file.slug})) }}
            </li>
          {% endfor %}
        </ul>
        <p class="options">
          {{ widgets.btn_dropdown_actions('file-actions-'~file.id, '', 'right') }}
          <ul id="file-actions-{{ file.id }}"
              data-dropdown-content=""
              class="f-dropdown">
            <li>
                <a href="#"
                   data-inject-call="{{ path('admin_files_manager_edit', {'id': file.id}) }}"
                   data-target="#file-edit-wrapper-{{ file.id }}">
                    {{ 'edit'|trans }}
                </a>
            </li>
            <li id="file-edit-wrapper-{{ file.id }}"></li>
            <li>
                <a href="{{ path('admin_files_manager_delete', {'id': file.id}) }}"
                   data-confirm-action="{{ 'file.delete'|trans }}">
                    {{ 'delete'|trans }}
                </a>
            </li>
          </ul>
        </p>
    </div>
    {% else %}
    <p class="notice-empty">{{ 'file.no.files'|trans }}</p>
    {% endfor %}
  </div>
  <div class="large-6 columns">
    {{ form_start(form, {
      'action': path('admin_files_manager')
    }) }}
      {{ form_row(form.title) }}
      {{ form_row(form.file) }}
      <input type="submit" name="submit"
             value="{{ 'submit'|trans }}" class="tiny right button">
    {{ form_end(form) }}
  </div>
</div>
{%- endblock main %}
