{% extends "backend/layout.html.twig" %}

{% block main -%}
<div class="row">
  <div class="large-12 columns">
    {% if is_archive %}
      <h3>{{ 'archives'|trans }}</h3>
    {% endif %}
    {% for message in messages %}
    <div class="row">
      <div class="large-3 columns">
        <h3>{{ message.name }}</h3>
        <strong>{{ message.email }}</strong>
        <br>
        {{ message.date|date('d/m/Y') }}
        <a href="#"
           data-dropdown="message_action{{ message.id }}"
           class="tiny button dropdown">
          {{ 'actions'|trans }}
        </a>
        <br>
        <ul id="message_action{{ message.id }}"
            data-dropdown-content=""
            class="f-dropdown">
          <li>
            <a href="{{ path('admin_messaging_manager_archive_item', {'id': message.id}) }}">
              {% if is_archive %}
                <i class="fi-refresh"></i>
                {{ 'restore'|trans }}
              {% else %}
                <i class="fi-archive"></i>
                {{ 'archive'|trans }}
              {% endif %}
            </a>
          </li>
          <li>
            <a href="{{ path('admin_messaging_manager_delete', {'id': message.id}) }}"
               data-confirm-action="{{ 'confirm'|trans }}">
              <i class="fi-x"></i>
              {{ 'delete'|trans }}
            </a>
          </li>
        </ul>
      </div>
      <div class="large-9 columns">
        <h3>{{ message.subject }}</h3>
        <p>{{ message.message|nl2br }}</p>
      </div>
    </div>
    {% else %}
    <p class="notice-empty">{{ 'messaging.no.messages'|trans }}</p>
    {% endfor %}
    {% if not is_archive %}
    <a href="{{ path('admin_messaging_manager_archive') }}"
       style="color: #aaa">
      <i class="fi-archive"></i>&nbsp;
      {{ 'archives'|trans }}
    </a>
    {% endif %}
  </div>
</div>
{%- endblock main %}
