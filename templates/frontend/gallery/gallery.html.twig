{% extends "frontend/layout.html.twig" %}

{% if not section.navBar %}{% set nav_class = ' no-nav' %}{% else %}{% set nav_class = '' %}{% endif %}
{% if section.thumbList %}{% set thumb_class = ' gallery-thumb' %}{% else %}{% set thumb_class = '' %}{% endif %}
{% if section.extended %}{% set extended_class = ' gallery-extended' %}{% else %}{% set extended_class = '' %}{% endif %}
{% block body_class parent()
    ~ widgets.section_body_classes(section)
    ~ ' gallery-'
    ~ section.galleryMode
    ~ extended_class
    ~ nav_class
    ~ thumb_class
%}

{% block title widgets.section_title(section, parent()) %}

{% block description %}
{% if section.description|length %}
{{ section.description|e }}
{% else %}
{{ parent() }}
{% endif %}
{% endblock description %}

{% block head %}
    {% include "frontend/gallery/preloader.css.twig" %}
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.3.7/slick.css"/>
    {{ parent() }}
{% endblock head %}

{% block javascripts %}
    {{ parent() }}
    {% if 'masonry' == section.galleryMode %}
        {% include "frontend/gallery/_masonry.js.twig" %}
    {% elseif section.isSlidable %}
        <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.3.7/slick.min.js"></script>
        <script type="text/javascript">
            $(function(){
                $('.gallery-slider').slick({
                    dots: false,
                    infinite: true,
                    arrows: false,
                    lazyLoad: 'ondemand',
                    asNavFor: '#slide-thumb',
                    fade: {{ (section.slideMode == 'fade') ? 'true' : 'false' }}
                });
                {% if section.thumbList %}
                $('#slide-thumbs').slick({
                    dots: false,
                    infinite: false,
                    lazyLoad: 'ondemand',
                    slidesToShow: 12,
                    slidesToScroll: 1,
                    responsive: [
                        {
                            breakpoint: 1024,
                            settings: {
                                slidesToShow: 7,
                                slidesToScroll: 3
                            }
                        },
                        {
                            breakpoint: 600,
                            settings: {
                                slidesToShow: 5,
                                slidesToScroll: 5
                            }
                        },
                        {
                            breakpoint: 480,
                            settings: {
                                slidesToShow: 3,
                                slidesToScroll: 3
                            }
                        }
                    ]
                });
                {% endif %}
            });
        </script>
    {% endif %}
{% endblock javascripts %}

{%- block main -%}
{% if section.hasSlides %}
  {{ section.triggerShuffle }}
  <div id="gallery">
    {% include "frontend/gallery/_"~ section.galleryMode ~".html.twig" %}
  </div>
{% else %}
<p class="coming-soon">
  {{ 'section.coming.soon'|trans }}
</p>
{% endif %}
{%- endblock main -%}
