<script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.3.7/slick.min.js"></script>
<script src="{{ app.request.basepath }}/js/vendor/jquery.kinetic.min.js?v={{ semver }}"></script>
<script src="{{ app.request.basepath }}/js/vendor/jquery.mousewheel.min.js?v={{ semver }}"></script>
<script type="text/javascript">
    $(function(){

        var gallerySlider = $('.gallery-slider');

        {# Slider mechanism #}
        gallerySlider.slick({
            dots: false,
            infinite: true,
            arrows: false,
            lazyLoad: 'progressive',
            asNavFor: '#slide-thumb',
            fade: {{ (section.slideMode == 'fade') ? 'true' : 'false' }}
        });

        {# Add space key navigation to arrows key #}
        $('body').on('keydown', function(event) {
            if (event.which == 32) {
                gallerySlider.slickNext();
            }
        });

        {# Add navigation on mouse click #}
        gallerySlider.on('click', '.slick-slide', function() {
            gallerySlider.slickNext();
        });

        {# Optional thumblist #}
        {% if section.thumbList %}

        var galleryThumbs = $('#slide-thumbs');

        galleryThumbs
            .kinetic()
            .mousewheel(function(event, delta) {

                this.scrollLeft -= (delta * 30);

                event.preventDefault();

            })
            .on('click', '.thumb', function() {
                var slideIndex = $(this).attr('index');

                gallerySlider.slickGoTo(slideIndex);
            });
        {% endif %}

    });
</script>